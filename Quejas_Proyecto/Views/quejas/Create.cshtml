@model Quejas_Proyecto.context.queja_dep_sucursal

@{
    ViewBag.Title = "Ingrese su Queja";
}

<h2>@ViewBag.Title</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

<div class="form-horizontal">
    <h4>queja</h4>
    <hr />
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <div class="form-group">
        @Html.LabelFor(model => model.DepaView.iddepartamento, "Departamentos", htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">

            @Html.DropDownListFor(m => m.DepaView.iddepartamento, ViewBag.GetDepa as SelectList, "seleccione", new { id = "Depa", @class = "form-control" })

        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.SucuView.idmunicipio, "Municipios", htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.DropDownListFor(model => model.SucuView.idmunicipio, new SelectList(""), "seleccione", new { id = "muni", @class = "form-control" })
            @Html.ValidationMessageFor(model => model.SucuView.idmunicipio, "", new { @class = "text-danger" })
        </div>
    </div>




    <div class="form-group">
        @Html.LabelFor(model => model.ComercioView.idcomercio, "comercio", htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.DropDownListFor(model => model.ComercioView.idcomercio, new SelectList(""), "seleccione", new { id = "Comercio", @class = "form-control" })
          
        </div>
    </div>




    <div class="form-group">
        @Html.LabelFor(model => model.QuejaView.idsucursal, "sucursal", htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.DropDownListFor(m => m.QuejaView.idsucursal, new SelectList(""), "Seleccione Sucursal", new { id = "sucu", @class = "form-control" })
            @Html.ValidationMessageFor(model => model.QuejaView.idsucursal, "", new { @class = "text-danger" })
        </div>
    </div>




    <div class="form-group">
        @Html.LabelFor(model => model.QuejaView.queja1, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.QuejaView.queja1, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.QuejaView.queja1, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.QuejaView.fecha_queja, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.EditorFor(model => model.QuejaView.fecha_queja, new { htmlAttributes = new { @class = "form-control" } })
            @Html.ValidationMessageFor(model => model.QuejaView.fecha_queja, "", new { @class = "text-danger" })
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Create" class="btn btn-default" />
        </div>
    </div>
</div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

<script src="~/Scripts/jquery-3.4.1.min.js"></script>

<script>
    $(document).ready(function () {
        $("#Depa").change(function () {

            var Depaid = $(this).val();
          //  debugger
            $.ajax({
                type: "POST",
                url: "/quejas/GetMunicipioSucursal?Depa=" + Depaid,
                contentType: "html",
                success: function (response) {
                 //  debugger
                    $("#muni").empty();
                    $("#muni").append(response);
                }
            })
        })
    })

    $(document).ready(function () {
        $("#muni").change(function () {

            var Munic_id = $(this).val();
            //debugger
            $.ajax({
                type: "POST",
                url: "/quejas/GetComercio?Munic=" + Munic_id,
                contentType: "html",
                success: function (response) {
                    // debugger
                    $("#Comercio").empty();
                    $("#Comercio").append(response);
                }
            })
        })
    })

    $(document).ready(function () {
     
        $("#muni").change(function () {
            var Munici_id = $(this).val();
            $("#Comercio").change(function () {
                
                var Come_Id = $(this).val();
                
             //   debugger
                $.ajax({
                    type: 'POST',
               
                    url: '/quejas/GetSucursal?ComeId=' + Come_Id + '&Munici_id=' + Munici_id,
                  
                    contentType: "html",
                    
                    success: function (response) {
                       // debugger
        
                        $("#sucu").empty();
                        $("#sucu").append(response);
                    }
                })
            })
    })
       
    })



</script>